<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard | Trend My Song</title>
  <link rel="icon" href="data:image/x-icon;base64," />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='lightgreen' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'/><path d='M16.5 20.93a5 5 0 1 1-.6-9 7 7 0 0 0-13.9.6'/></svg>">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700;900&family=Spline+Sans:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="styles.css"> <script src="https://cdn.tailwindcss.com"></script>
  <style>
.notice-banner {
      position: sticky;
      background-color: rgb(134, 0, 0);
      display: none;
      top: 0;
      left: 0;
      width: 100%;
      border-radius: 15px;
      color: white;
      padding: 0.6rem 1rem;
      text-align: left;
      font-size: 0.9rem;
      border-bottom: 1px solid var(--border-color);
      z-index: 9999;
    }
    .circular-chart {
      display: block;
      margin: 10px auto;
      max-width: 80%;
      max-height: 250px;
    }
    .circle-bg {
      fill: none;
      stroke: #29382f;
      stroke-width: 3.8;
    }
    .circle {
      fill: none;
      stroke-width: 2.8;
      stroke-linecap: round;
      animation: progress 1s ease-out forwards;
    }
    @keyframes progress {
      0% {
        stroke-dasharray: 0 100;
      }
    }
    .percentage {
      fill: #4ade80;
      font-family: 'Spline Sans', sans-serif;
      font-size: 0.5em;
      text-anchor: middle;
      font-weight: 600;
    }
    .stats-card {
      background: linear-gradient(135deg, #1a211c 0%, #29382f 100%);
      border: 1px solid #2a3a30;
    }
</style>

</head>
<body class="bg-[#111714] text-white min-h-screen flex overflow-x-hidden">

  <div class="demo-banner">
<span>This is a Demo Account. To activate your own account, please proceed to checkout</span>
<a href="/pricing">
  <button class="demo-button">Get Started</button>
</a>  </div>
  
  <style>
    body {
      margin-top: 48px; /* Adjust to match the banner height */
    }
  
    .demo-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: linear-gradient(to right, #a8e6a3, #d2f5c7);
      color: #003c12;
      padding: 10px 20px;
      font-family: "Segoe UI", Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      z-index: 1000;
      font-size: 15px;
      animation: fadeInSlideDown 0.4s ease-out;
      flex-wrap: wrap;
      text-align: center;
      font-weight: 600;
    }
  
    .demo-button {
      background-color: #2ecc71;
      color: rgb(1, 53, 21);
      border: none;
      padding: 3px 6px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: background-color 0.2s ease;
    }
  
    .demo-button:hover {
      background-color: #27ae60;
    }
  
    @keyframes fadeInSlideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  
    @media (max-width: 480px) {
      .demo-banner {
        flex-direction: column;
        padding: 12px 16px;
      }
  
      .demo-button {
        width: 100%;
        text-align: center;
      }
    }
  </style>
  

  <aside class="w-80 bg-[#111714] p-6 flex flex-col fixed h-screen">
    <div class="flex items-center gap-3 mb-8">
      <div
        aria-label="Music Distribution Co. Logo"
      ></div>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="lightgreen" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wave-circle-icon lucide-wave-circle"><circle cx="12" cy="12" r="10"/><path d="M16.5 20.93a5 5 0 1 1-.6-9 7 7 0 0 0-13.9.6"/></svg>
      <h1 class="text-lg font-bold bg-gradient-to-r from-green-400 to-green-200 bg-clip-text text-transparent">Trend My Song</h1>
    </div>
    
    <nav class="flex flex-col gap-2" aria-label="Primary Navigation">
      <a href="#" class="flex items-center gap-3 px-3 py-2 rounded-lg bg-[#29382f] font-medium" aria-current="page">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="lightgreen" stroke="lightgreen" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard-icon lucide-layout-dashboard"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
        <span>Dashboard</span>
      </a>
      <a href="release" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-music4-icon lucide-music-4"><path d="M9 18V5l12-2v13"/><path d="m9 9 12-2"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
        <span>Add Release</span>
      </a>
      <a href="analytics" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-no-axes-combined-icon lucide-chart-no-axes-combined"><path d="M12 16v5"/><path d="M16 14v7"/><path d="M20 10v11"/><path d="m22 3-8.646 8.646a.5.5 0 0 1-.708 0L9.354 8.354a.5.5 0 0 0-.707 0L2 15"/><path d="M4 18v3"/><path d="M8 14v7"/></svg>
        <span>Analytics</span>
      </a>
      <a href="promotion" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rocket-icon lucide-rocket"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
        <span>Promotion</span>
      </a>
      <a href="payouts" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-dollar-sign-icon lucide-circle-dollar-sign"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/><path d="M12 18V6"/></svg>
        <span>Payouts</span>
      </a>
      <a href="account" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-icon lucide-user-round"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 0 0-16 0"/></svg>
        <span>Account</span>
      </a>
    </nav>

    <div class="mt-auto">
      <a href="support" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle-more-icon lucide-message-circle-more"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/></svg>
        <span>Support Team</span>
      </a>
      <a href="#" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-[#29382f] font-medium" onclick="logout()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-power-icon lucide-power"><path d="M12 2v10"/><path d="M18.4 6.6a9 9 0 1 1-12.77.04"/></svg>
        <span class="text-red-300">Log Out</span>
      </a>
      <div class="border-t border-gray-700 my-2"></div>
      <div class="flex flex-col items-left gap-1 px-3 py-2 text-sm">
        <span class="text-gray-500 font-sans">&nbsp;</span>
        <span class="text-gray-500 font-sans">&nbsp;</span>
      </div>
      <script>
        function logout() {
        // Clear the localStorage for both "username" and "key"
        localStorage.removeItem("username");
        localStorage.removeItem("key");

        // Redirect to the homepage
        window.location.href = "/";
        }
      </script>
    </div>
  </aside>

  <main class="flex-1 p-8 overflow-auto ml-80">


    <h2 class="text-2xl font-bold mb-6">Dashboard</h2>

    <div class="mb-6 border-b border-[#29382f] flex space-x-6">
      <button class="tab-button pb-2 border-b-2 border-white font-semibold" data-tab="overview" aria-selected="true" role="tab" id="tab-overview" aria-controls="panel-overview" tabindex="0">Overview</button>
      <button class="tab-button pb-2 border-b-2 border-transparent hover:border-[#4ade80] font-semibold" data-tab="control-panel" aria-selected="false" role="tab" id="tab-control-panel" aria-controls="panel-control-panel" tabindex="-1">Current Plan</button>
      <button class="tab-button pb-2 border-b-2 border-transparent hover:border-[#4ade80] font-semibold" data-tab="claim-management" aria-selected="false" role="tab" id="tab-claim-management" aria-controls="panel-claim-management" tabindex="-1">Claim Management</button>
      <button class="tab-button pb-2 border-b-2 border-transparent hover:border-[#4ade80] font-semibold" data-tab="support-team" aria-selected="false" role="tab" id="tab-support-team" aria-controls="panel-support-team" tabindex="-1">Support Team</button>
    </div>
       <section id="overview" class="tab-panel" role="tabpanel" aria-labelledby="tab-overview" tabindex="0">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-[#29382f] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-3">In Review</h3>
          <p class="text-4xl font-bold" id="review">—</p>
          <p class="mt-1 text-[#a1a1aa]">Tracks In Review</p>
        </div>
        <div class="bg-[#29382f] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-3">In Progress</h3>
          <p class="text-4xl font-bold" id="progress">—</p>
          <p class="mt-1 text-[#a1a1aa]">Tracks In Progress</p>
        </div>
        <div class="bg-[#29382f] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-3">Approved</h3>
          <p class="text-4xl font-bold" id="copyrighted">—</p>
          <p class="mt-1 text-[#a1a1aa]">Tracks Delivered</p>
        </div>
      </li>
      </div>
      <div class="notice-banner">
        ⛔ There <span id="verb">are</span> <span id="rejected-count">0</span> rejected, suspended or removed <span id="noun">tracks</span>, please check the track list below.
      </div>
      

      <div class="mt-10">
        <h3 class="text-xl font-semibold mb-4">Track List</h3>
        <div class="flex flex-col lg:flex-row items-start lg:items-center gap-4 mb-6">
          <div class="flex gap-2">
            <button id="sortOldToNew" class="sort-button">Oldest First</button>
            <button id="sortNewToOld" class="sort-button">Newest First</button>
          </div>
        </div>
          <div class="flex justify-between items-center mt-6">
          <div class="flex-1 max-w-md">
            <input id="searchInput" type="text" placeholder="Search by title or artist..." 
              class="bg-[#1f2923] text-white px-4 py-2.5 rounded-lg w-full border border-[#2e3a33] focus:border-[#4ade80] focus:outline-none transition-colors" />
          </div>
          <div id="paginationContainer" class="flex gap-2">
            </div>
        </div>

        <div class="table-container">
          <div id="dataContainer">
            <div class="loading">Loading tracks...</div>
          </div>
        </div>
                  <div class="page-info" id="pageInfo">
            </div>
      </div>
    </section>

    <section id="control-panel" class="tab-panel" role="tabpanel" aria-labelledby="tab-control-panel" tabindex="0" style="display: none;">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <!-- Tracks Usage Section with Circular Progress -->
        <div class="bg-[#1a211c] rounded-xl p-6 border border-[#2a3a30] shadow-lg">
          <h3 class="text-lg font-semibold mb-4 text-white flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400">
              <path d="M9 18V5l12-2v13"/>
              <path d="m9 9 12-2"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
            Tracks Usage
          </h3>
          
          <div class="flex items-center justify-between">
            <!-- Circular Progress Chart -->
            <div class="flex-1">
              <svg viewBox="0 0 36 36" class="circular-chart">
                <path class="circle-bg"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path id="circularProgress" class="circle"
                  stroke="url(#gradient)"
                  stroke-dasharray="0, 100"
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <defs>
                  <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#4ade80;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
                  </linearGradient>
                </defs>
                <text x="18" y="20.35" class="percentage" id="percentageText">0%</text>
              </svg>
            </div>
            
            <!-- Stats -->
            <div class="flex-1 space-y-4">
              <div class="stats-card rounded-lg p-4">
                <span class="block text-gray-400 text-sm mb-1">Uploaded</span>
                <span id="tracksUploaded" class="text-2xl font-bold text-green-300">-</span>
              </div>
              <div class="stats-card rounded-lg p-4">
                <span class="block text-gray-400 text-sm mb-1">Remaining</span>
                <span id="tracksLeft" class="text-2xl font-bold text-blue-300">-</span>
              </div>
              <div class="stats-card rounded-lg p-4">
                <span class="block text-gray-400 text-sm mb-1">Total Limit</span>
                <span id="trackLimit" class="text-2xl font-bold text-purple-300">-</span>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Services Section -->
        <div class="bg-[#1a211c] rounded-xl p-6 border border-[#2a3a30] shadow-lg">
          <h3 class="text-lg font-semibold mb-4 text-white flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400">
              <rect width="7" height="9" x="3" y="3" rx="1"/>
              <rect width="7" height="5" x="14" y="3" rx="1"/>
              <rect width="7" height="9" x="14" y="12" rx="1"/>
              <rect width="7" height="5" x="3" y="16" rx="1"/>
            </svg>
            Active Services
          </h3>
          
          <div class="space-y-3">
            <div class="flex items-center justify-between p-4 bg-[#29382f] rounded-lg border border-[#354a3d]">
              <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="lightgreen" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copyright-icon lucide-copyright"><circle cx="12" cy="12" r="10"/><path d="M14.83 14.83a4 4 0 1 1 0-5.66"/></svg>
                <span class="text-white">YouTube Content-ID</span>
              </div>
              <span id="YT" class="px-3 py-1 text-sm rounded-full font-medium">-</span>
            </div>
          
            <div class="flex items-center justify-between p-4 bg-[#29382f] rounded-lg border border-[#354a3d]">
              <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="lightgreen" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-instagram-icon lucide-instagram"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>                <span class="text-white">Social Media</span>
              </div>
              <span id="SM" class="px-3 py-1 text-sm rounded-full font-medium">-</span>
            </div>
          
            <div class="flex items-center justify-between p-4 bg-[#29382f] rounded-lg border border-[#354a3d]">
              <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="lightgreen" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mic-vocal-icon lucide-mic-vocal"><path d="m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12"/><path d="M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5"/><circle cx="16" cy="7" r="5"/></svg>                <span class="text-white">Streaming Platforms</span>
              </div>
              <span id="DSP" class="px-3 py-1 text-sm rounded-full font-medium">-</span>
            </div>
          
            <div class="flex items-center justify-between p-4 bg-[#29382f] rounded-lg border border-[#354a3d]">
              <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="lightgreen" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>                <span class="text-white">Promotion Campaigns</span>
              </div>
              <span id="PM" class="px-3 py-1 text-sm rounded-full font-medium">-</span>
            </div>
          </div>
          
        </div>
      </div>
    </section>

    <section id="claim-management" class="tab-panel" role="tabpanel" aria-labelledby="tab-claim-management" tabindex="0" style="display: none;">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <!-- Whitelist Form -->
        <div class="bg-[#1a211c] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-4">Whitelist YouTube Channel</h3>
          <form id="whitelistForm" class="space-y-4" onsubmit="handleWhitelistSubmit(event)">
            <div>
              <label for="channelUrl" class="block text-sm font-medium mb-2">YouTube Channel URL</label>
              <input 
                type="text" 
                id="channelUrl" 
                name="channelUrl"
                placeholder="https://youtube.com/channel/..."
                class="w-full bg-[#1f2923] text-white px-3 py-2 rounded-lg border border-[#2e3a33] focus:border-[#4ade80] focus:outline-none transition-colors"
                required
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium mb-2">Whitelist Option</label>
              <div class="grid grid-cols-1 gap-3">
                <label class="relative flex items-center p-3 bg-[#1f2923] rounded-lg border border-[#2e3a33] cursor-pointer hover:border-[#4ade80] transition-colors group">
                  <input type="radio" name="whitelistType" value="all" class="sr-only peer" checked />
                  <div class="w-4 h-4 border-2 border-[#4ade80] rounded-full mr-3 flex items-center justify-center peer-checked:bg-[#4ade80] transition-colors">
                    <div class="w-2 h-2 bg-white rounded-full opacity-0 peer-checked:opacity-100 transition-opacity"></div>
                  </div>
                  <div class="flex-1">
                    <span class="text-sm font-medium text-white">Whitelist from all tracks</span>
                    <p class="text-xs text-[#a1a1aa] mt-1">Apply whitelist to all your uploaded tracks</p>
                  </div>
                  <svg class="w-5 h-5 text-[#4ade80] opacity-0 peer-checked:opacity-100 transition-opacity" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                  </svg>
                </label>
                
                <label class="relative flex items-center p-3 bg-[#1f2923] rounded-lg border border-[#2e3a33] cursor-pointer hover:border-[#4ade80] transition-colors group">
                  <input type="radio" name="whitelistType" value="specific" class="sr-only peer" />
                  <div class="w-4 h-4 border-2 border-[#4ade80] rounded-full mr-3 flex items-center justify-center peer-checked:bg-[#4ade80] transition-colors">
                    <div class="w-2 h-2 bg-white rounded-full opacity-0 peer-checked:opacity-100 transition-opacity"></div>
                  </div>
                  <div class="flex-1">
                    <span class="text-sm font-medium text-white">Whitelist from specific tracks</span>
                    <p class="text-xs text-[#a1a1aa] mt-1">Choose which tracks to apply whitelist to</p>
                  </div>
                  <svg class="w-5 h-5 text-[#4ade80] opacity-0 peer-checked:opacity-100 transition-opacity" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                  </svg>
                </label>
              </div>
            </div>
            <button 
                type="submit"
                disabled="true"
                class="w-full bg-[#4ade80] text-black font-medium py-2 px-4 rounded-lg hover:bg-[#22c55e] transition-colors"
              >
                Submit Whitelist Request
              </button>
          </form>
          
        </div>
        <div class="bg-[#1a211c] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-4">YouTube Video Claim Removal</h3>
          <form id="claimRemovalForm" class="space-y-4" onsubmit="handleClaimRemovalSubmit(event)">
            <div>
              <label for="MainvideoUrl" class="block text-sm font-medium mb-2">YouTube Video Link</label>
              <input 
                type="text" 
                id="MainvideoUrl" 
                name="MainvideoUrl"
                placeholder="https://youtube.com/watch?v=..."
                class="w-full bg-[#1f2923] text-white px-3 py-2 rounded-lg border border-[#2e3a33] focus:border-[#4ade80] focus:outline-none transition-colors"
                required
              />
            <div>
              <label for="additionalVideos" class="block text-sm font-medium mb-2">Additional Video Links (Optional)</label>
              <textarea 
                id="additionalVideos" 
                name="additionalVideos"
                placeholder="Enter up to 5 additional YouTube video links, one per line"
                rows="5"
                maxlength="250"
                class="w-full bg-[#1f2923] text-white px-3 py-2 rounded-lg border border-[#2e3a33] focus:border-[#4ade80] focus:outline-none transition-colors resize-none"
              ></textarea>
              <p class="text-xs text-[#a1a1aa] mt-1">Add up to 5 additional YouTube video links that need claim removal (one per line)</p>
            </div>
            </div>

            <button 
              type="submit" 
              disabled="true"
              class="w-full bg-[#4ade80] text-black font-medium py-2 px-4 rounded-lg hover:bg-[#22c55e] transition-colors"
            >
              Submit Claim Removal Request
            </button>
          </form>
          </div>
        </div>      
        
      </div>
    </section>

    <section id="support-team" class="tab-panel" role="tabpanel" aria-labelledby="tab-support-team" tabindex="0" style="display: none;">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="bg-[#29382f] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-4">Support Statistics</h3>
          <div class="space-y-4">
            <div class="flex justify-between">
              <span>Live Chat Support</span>
              <span class="font-bold">Available</span>
            </div>
            <div class="flex justify-between">
              <span>Average Response Time</span>
              <span class="font-bold">24 hours</span>
            </div>
          </div>
        </div>

        <div class="bg-[#29382f] rounded-xl p-6">
          <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>
          <div class="space-y-3">
            <button onclick="window.open('https://t.me', '_blank')"` disabled="true" class="w-full bg-[#4ade80] text-black font-medium py-3 rounded-lg hover:bg-[#22c55e] transition-colors">
              Live Chat Support
            </button>
            <button onclick="document.getElementById('ticketModal').style.display='flex'" class="w-full bg-[#1f2923] text-white font-medium py-3 rounded-lg border border-[#2e3a33] hover:border-[#4ade80] transition-colors">
              Write a Ticket
            </button>

            <!-- Ticket Modal -->
            <div id="ticketModal" style="display:none;" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
              <div class="bg-[#1a211c] rounded-xl p-6 border border-[#2a3a30] shadow-lg w-full max-w-md relative" onclick="event.stopPropagation()">
                <button onclick="document.getElementById('ticketModal').style.display='none'" class="absolute top-3 right-3 text-gray-400 hover:text-white transition-colors">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                
                <h3 class="text-lg font-semibold mb-4 text-white">Write a Support Ticket</h3>
                
                <form id="ticketForm" onsubmit="handleTicketSubmit(event)" class="space-y-4">
                  <div>
                    <label for="ticketSubject" class="block text-sm font-medium mb-2">Subject</label>
                    <input 
                      type="text" 
                      id="ticketSubject" 
                      name="ticketSubject"
                      placeholder="e.g., Issue with track upload"
                      class="w-full bg-[#1f2923] text-white px-3 py-2 rounded-lg border border-[#2e3a33] focus:border-[#4ade80] focus:outline-none transition-colors"
                      required
                    />
                  </div>
                  
                  <div>
                    <label for="ticketMessage" class="block text-sm font-medium mb-2">Message</label>
                    <textarea 
                      id="ticketMessage" 
                      name="ticketMessage"
                      rows="5"
                      placeholder="Please describe your issue in detail..."
                      class="w-full bg-[#1f2923] text-white px-3 py-2 rounded-lg border border-[#2e3a33] focus:border-[#4ade80] focus:outline-none transition-colors"
                      required
                    ></textarea>
                  </div>
                  
                  <button type="submit" disabled="true" class="w-full bg-[#4ade80] text-black font-bold py-3 rounded-lg hover:bg-[#22c55e] transition-colors">
                    Send via Telegram
                  </button>
                </form>
              </div>
            </div>

            <script>
              function handleTicketSubmit(event) {
                event.preventDefault();
                
                const key = localStorage.getItem('key');
                const subject = document.getElementById('ticketSubject').value;
                const messageBody = document.getElementById('ticketMessage').value;
                
                if (!key) {
                  alert('Control Key not found. Please make sure you are logged in.');
                  return;
                }
                
                const message = `Control Key: ${key}\n\nSubject: ${subject}\n\nMessage:\n${messageBody}`;
                
                const telegramUrl = `https://t.me/trendmysong?text=${encodeURIComponent(message)}`;
                window.open(telegramUrl, '_blank');
                
                document.getElementById('ticketModal').style.display = 'none';
                document.getElementById('ticketForm').reset();
              }

              // Close modal when clicking the background overlay
              document.getElementById('ticketModal').addEventListener('click', function(event) {
                if (event.target === this) {
                  this.style.display = 'none';
                }
              });
            </script>
          </div>
        </div>
      </div>

      <div class="mt-6 bg-[#29382f] rounded-xl p-6">
        <h3 class="text-lg font-semibold mb-4">Contact Methods</h3>
        <div class="space-y-3">
          <div class="flex items-center justify-between p-4 bg-[#1f2923] rounded-lg">
            <div>
              <p class="font-medium">Telegram (Live Chat)</p>
              <p class="text-sm text-[#a1a1aa]">t.me/trendmysong</p>
            </div>
            <span class="px-3 py-1 bg-[#4ade80] text-black text-sm rounded-full">Response Time | 12 hours</span>

          </div>
          <div class="flex items-center justify-between p-4 bg-[#1f2923] rounded-lg">
            <div>
              <p class="font-medium">Email Support</p>
              <p class="text-sm text-[#a1a1aa]">support@trendmysong.com</p>
            </div>
            <span class="px-3 py-1 bg-yellow-400 text-black text-sm rounded-full">Response Time | 72 hours</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="table-manager.js"></script>
  <script>
       //Function to fetch the summary data
   async function fetchSummary() {
        try {
          const key = localStorage.getItem('key');

          if (!key || key === 'null') {
            console.error('Key not found');
            window.location.href = '/';
            return;
          }
        
          const statusResponse = await fetch(`/get-sheet-summary?key=${encodeURIComponent(key)}&sheetName=portal`);
          const data = await statusResponse.json();

          if (!Array.isArray(data) || data.length === 0) {
            console.error('No data available');
            alert('No data available for the specified key');
            return;
          }

          const summary = data[0];

          // Display the fetched data in corresponding elements
          document.getElementById('copyrighted').textContent = summary['Copyrighted'] || 'N/A';
          document.getElementById('review').textContent = summary['In Review'] || 'N/A';
          document.getElementById('progress').textContent = summary['In Progress'] || 'N/A';

          document.getElementById('rejected-count').textContent = summary['Rejected'] || 0;
          const rejectedCount = Number(summary['Rejected']) || 0;
          const banner = document.querySelector('.notice-banner');
          const rejectedSpan = document.getElementById('rejected-count');
          const verbSpan = document.getElementById('verb');
          const nounSpan = document.getElementById('noun');

          if (rejectedCount > 0) {
          rejectedSpan.textContent = rejectedCount;
          verbSpan.textContent = rejectedCount === 1 ? 'is' : 'are';
          nounSpan.textContent = rejectedCount === 1 ? 'track' : 'tracks';
          banner.style.display = 'block';
        } else {
          banner.style.display = 'none';
        }

            
        } catch (error) {
          console.error('Error fetching data:', error);
          alert('Error: Data Fetching (Contact the Support Team)');
        }
      }
    // Sort button functionality
    document.getElementById('sortOldToNew').addEventListener('click', function() {
      // Remove active class from all sort buttons
      document.querySelectorAll('.sort-button').forEach(btn => btn.classList.remove('active'));
      // Add active class to clicked button
      this.classList.add('active');
      // Add your sorting logic here
      console.log('Sort: Oldest First');
    });

    document.getElementById('sortNewToOld').addEventListener('click', function() {
      // Remove active class from all sort buttons
      document.querySelectorAll('.sort-button').forEach(btn => btn.classList.remove('active'));
      // Add active class to clicked button
      this.classList.add('active');
      // Add your sorting logic here
      console.log('Sort: Newest First');
    });

    // Tab functionality
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        // Remove active state from all tabs
        document.querySelectorAll('.tab-button').forEach(tab => {
          tab.classList.remove('border-white');
          tab.classList.add('border-transparent');
        });
        
        // Hide all tab panels
        document.querySelectorAll('.tab-panel').forEach(panel => {
          panel.style.display = 'none';
        });
        
        // Activate clicked tab
        button.classList.remove('border-transparent');
        button.classList.add('border-white');
        
        // Show corresponding panel
        const tabId = button.getAttribute('data-tab');
        document.getElementById(tabId).style.display = 'block';
      });
    });

    document.addEventListener('DOMContentLoaded', function () {
  fetchSummary();
});

  </script>
  <script>
  async function updateTrackUsage() {
    const key = localStorage.getItem('key');
    if (!key) return console.error('Login key not found.');

    try {
      const response = await fetch(`/tracks-usage?key=${encodeURIComponent(key)}`);
      if (!response.ok) throw new Error('Failed to fetch track usage');

      const usageData = await response.json();

      if (!usageData || usageData.length === 0) {
        console.warn('No track usage data found.');
        return;
      }

      const { limit, usage } = usageData[0];

      const uploaded = parseInt(usage, 10) || 0;
      const trackLimit = parseInt(limit, 10) || 0;
      const left = Math.max(trackLimit - uploaded, 0);
      const percentage = trackLimit > 0 ? Math.min((uploaded / trackLimit) * 100, 100) : 0;

      // Update UI
      document.getElementById('tracksUploaded').textContent = uploaded;
      document.getElementById('tracksLeft').textContent = left;
      document.getElementById('trackLimit').textContent = trackLimit;
      document.getElementById('percentageText').textContent = Math.round(percentage) + '%';

      // Update circular progress
      const circle = document.getElementById('circularProgress');
      circle.style.strokeDasharray = `${percentage}, 100`;

      // Change color based on usage
      if (percentage > 80) {
        circle.style.stroke = '#ef4444'; // Red
      } else if (percentage > 60) {
        circle.style.stroke = '#f59e0b'; // Yellow
      } else {
        circle.style.stroke = 'url(#gradient)'; // Green
      }

    } catch (error) {
      console.error('Error in updateTrackUsage:', error.message);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    updateTrackUsage();
    updateServiceCounters(); // Assuming this is defined elsewhere
  });

  // Toggle switches
  document.querySelectorAll('button[class*="w-12 h-6"]').forEach(toggle => {
    toggle.addEventListener('click', () => {
      const isActive = toggle.classList.contains('bg-[#4ade80]');
      const dot = toggle.querySelector('div');

      if (isActive) {
        toggle.classList.remove('bg-[#4ade80]');
        toggle.classList.add('bg-[#1f2923]');
        dot.classList.remove('right-0.5');
        dot.classList.add('left-0.5');
      } else {
        toggle.classList.remove('bg-[#1f2923]');
        toggle.classList.add('bg-[#4ade80]');
        dot.classList.remove('left-0.5');
        dot.classList.add('right-0.5');
      }
    });
  });
</script>
<script>
  async function fetchUsage() {
    const key = localStorage.getItem('key'); // Consistent lowercase
    if (!key) {
      console.error('No key found in localStorage.');
      return;
    }

    try {
      const res = await fetch(`/tracks-usage?key=${encodeURIComponent(key)}`);
      if (!res.ok) throw new Error('Failed to fetch data');

      const data = await res.json();
      console.log('Fetched data:', data); // Debug output

      if (!Array.isArray(data) || data.length === 0) {
        throw new Error('No data found for this key');
      }

      const services = data[0].service;
      if (!services) {
        console.error('Missing service data');
        return;
      }

      ['YT', 'SM', 'DSP', 'PM'].forEach(serviceKey => {
        const value = services[serviceKey];
        const el = document.getElementById(serviceKey);
        if (!el) return;

        if (value === 'Active') {
          el.textContent = 'Active';
          el.className = 'px-3 py-1 bg-[#4ade80] text-black text-sm rounded-full font-medium';
        } else {
          el.textContent = 'Inactive';
          el.className = 'px-3 py-1 bg-[#1f2923] text-red-300 text-sm rounded-full font-medium border border-[#ef4444]';
        }
      });

      // Optional debug output
      const result = document.getElementById('result');
      if (result) result.textContent = JSON.stringify(data, null, 2);

    } catch (err) {
      console.error('Error in fetchUsage:', err);
      const result = document.getElementById('result');
      if (result) result.textContent = 'Error: ' + err.message;
    }
  }

  // ✅ Unified DOMContentLoaded block
  document.addEventListener('DOMContentLoaded', () => {
    fetchSummary();
    updateTrackUsage();
    fetchUsage(); // 🟢 make sure this runs
    updateServiceCounters?.(); // safe optional call
  });
</script>
</body>
</html>